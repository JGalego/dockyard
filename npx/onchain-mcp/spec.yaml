# Onchain MCP Server Configuration
# MCP server for blockchain data interaction through the Bankless API
# Package: https://www.npmjs.com/package/@bankless/onchain-mcp
# Repository: https://github.com/Bankless/onchain-mcp
# Will build as: ghcr.io/stacklok/dockyard/npx/onchain-mcp:1.0.6

metadata:
  name: onchain-mcp
  description: "MCP server for blockchain data interaction through the Bankless API"
  version: "1.0.6"
  protocol: npx

spec:
  package: "@bankless/onchain-mcp"
  version: "1.0.6"

provenance:
  repository_uri: "https://github.com/Bankless/onchain-mcp"
  repository_ref: "refs/heads/main"

# Optional: Security allowlist
security:
  allowed_issues:
    - code: "W001"
      reason: |
        The read_contract tool description contains the word "important:" as part of legitimate
        technical documentation explaining how to handle tuple types and nested structs in
        blockchain smart contracts. This is necessary technical guidance for proper usage
        of the tool, not a prompt injection attempt.
    - code: "TF001"
      reason: |
        Data leak toxic flow is expected and required for blockchain data operations. The server:
        - Reads blockchain state and contract data (get_source, get_abi, read_contract)
        - Processes transaction history and token balances (get_transaction_history_for_user, get_token_balances_on_network)
        - Returns this data to users for analysis
        This combination is essential for blockchain data analysis, allowing agents to query,
        analyze, and report on blockchain state and transactions.